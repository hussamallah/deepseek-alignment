<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEEP SEEK ALIGNMENT</title>
    <base href="/deepseek-alignment/">
    <script src="core.js"></script>
    <script src="deepseek.js"></script>
    <script src="archetype.js"></script>
    <script src="eas.js"></script>
    <script src="biofeedback.js"></script>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
        }

        .title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
        }

        .ball {
            width: 200px;
            height: 200px;
            background: #0ff;
            border-radius: 50%;
            margin: 2rem auto;
            position: relative;
            animation: pulse 2s infinite;
            cursor: pointer;
        }

        .ball::before {
            content: '';
            position: absolute;
            width: 50%;
            height: 50%;
            background: #000;
            border-radius: 50%;
            top: 25%;
            left: 25%;
            animation: rotate 4s infinite linear;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .question {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .input {
            width: 100%;
            background: #222;
            border: 2px solid #0ff;
            color: #fff;
            padding: 1rem;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            box-shadow: 0 0 10px #0ff;
        }

        .button {
            width: 100%;
            background: #0ff;
            color: #000;
            border: none;
            padding: 1rem;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .button:hover {
            background: #fff;
            box-shadow: 0 0 20px #0ff;
        }

        .progress {
            margin-top: 1rem;
            color: #0ff;
            font-size: 1.2rem;
        }

        .status {
            margin-top: 1rem;
            color: #0f0;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">DEEP SEEK ALIGNMENT</h1>
        
        <div class="question" id="question">
            What is your deepest truth?
        </div>

        <div class="ball" id="ball"></div>

        <form id="answerForm" onsubmit="return false;">
            <input type="text" class="input" id="answer" placeholder="Type your answer...">
            <button type="submit" class="button" id="submit">SUBMIT</button>
        </form>
        <div class="progress" id="progress">Question 1 of 10</div>
        <div class="status" id="status"></div>
    </div>

    <script>
        // Initialize DeepSeek system
        const deepseek = new DeepSeekSystem();
        const archetypeDetector = new ArchetypeDetector();
        const easEngine = new EAS_Engine();
        const biofeedback = new Biofeedback_UI();

        const questions = [
            "What is your deepest truth?",
            "What are you most afraid of?",
            "What do you truly desire?",
            "What is your greatest strength?",
            "What is your greatest weakness?",
            "What is your purpose in life?",
            "What is your greatest achievement?",
            "What is your biggest regret?",
            "What is your ideal future?",
            "What is your core value?"
        ];

        const ball = document.getElementById('ball');
        const question = document.getElementById('question');
        const answerForm = document.getElementById('answerForm');
        const answer = document.getElementById('answer');
        const submit = document.getElementById('submit');
        const progress = document.getElementById('progress');
        const status = document.getElementById('status');
        let currentQuestion = 0;
        let answers = [];

        function changeBallColor() {
            const colors = ['#0ff', '#f0f', '#0f0', '#ff0', '#f00'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            ball.style.background = randomColor;
        }

        function updateStatus(message) {
            status.textContent = message;
            setTimeout(() => status.textContent = '', 3000);
        }

        function processAnswer(text) {
            if (!text.trim()) {
                updateStatus('Please enter a response');
                return false;
            }

            // Analyze answer with archetype detector
            const archetype = archetypeDetector.analyze(text);
            
            // Update EAS score
            easEngine.increaseScore(10);
            
            // Trigger biofeedback
            biofeedback.triggerReaction('positive');
            
            // Store answer
            answers.push({
                question: questions[currentQuestion],
                answer: text,
                archetype: archetype,
                timestamp: new Date().toISOString()
            });

            updateStatus(`Answer recorded. Processing...`);
            return true;
        }

        function determineChamber() {
            // Get final archetype
            const finalArchetype = archetypeDetector.getCurrentArchetype();
            
            // Get EAS score
            const easScore = easEngine.getScore();
            
            // Determine chamber based on archetype and EAS
            const chamber = deepseek.determineChamber(finalArchetype, easScore);
            
            // Add chamber-specific keywords for better alignment
            const keywords = {
                'al7anoon': ['love', 'heart', 'care', 'compassion', 'kindness'],
                'w7eaat': ['control', 'power', 'order', 'discipline', 'authority'],
                'balance': ['harmony', 'peace', 'equilibrium', 'balance', 'center'],
                'kalem': ['logic', 'truth', 'writing', 'knowledge', 'wisdom', 'pen', 'ink'],
                'waraq': ['memory', 'records', 'paper', 'scroll', 'archive', 'history'],
                'ashar': ['transformation', 'change', 'fire', 'purify', 'evolve', 'ten'],
                'throbgod': ['energy', 'vibration', 'frequency', 'rhythm', 'flow']
            };

            // Count keyword matches
            let maxMatches = 0;
            let selectedChamber = chamber;

            for (const [key, words] of Object.entries(keywords)) {
                let matches = 0;
                answers.forEach(answer => {
                    const text = answer.answer.toLowerCase();
                    words.forEach(word => {
                        if (text.includes(word)) {
                            matches++;
                        }
                    });
                });

                if (matches > maxMatches) {
                    maxMatches = matches;
                    selectedChamber = {
                        name: key.toUpperCase(),
                        url: `${key}.html`
                    };
                }
            }

            return selectedChamber;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                question.textContent = questions[currentQuestion];
                progress.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
                answer.value = '';
                answer.focus();
            } else {
                const chamber = determineChamber();
                updateStatus(`Alignment complete! Redirecting to ${chamber.name}...`);
                setTimeout(() => {
                    window.location.href = chamber.url;
                }, 2000);
            }
        }

        function handleSubmit(e) {
            e.preventDefault();
            const answerText = answer.value.trim();
            if (processAnswer(answerText)) {
                nextQuestion();
            }
        }

        // Event Listeners
        answerForm.addEventListener('submit', handleSubmit);
        ball.addEventListener('click', changeBallColor);

        // Initialize
        question.textContent = questions[0];
        progress.textContent = `Question 1 of ${questions.length}`;
        answer.focus();

        // Connect to DeepSeek system
        deepseek.initialize();
        updateStatus('DeepSeek system connected');
    </script>
</body>
</html> 